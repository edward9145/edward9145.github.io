<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Develop App Dr.Seek - Server Side &middot; Kejia.Wu 呉可嘉
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/main.css">
  <link rel="stylesheet" href="/public/css/lightbox.css" /> 
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- JS -->
  <script src="/public/js/jquery-1.11.0.min.js"></script>
  <script src="/public/js/lightbox.min.js"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-33533324-4', 'auto');
    ga('send', 'pageview');

  </script>
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <img src="/public/img/avatar.jpg" alt="my avatar" class="avatar"/>
      <h2>
        <a href="/">
          Kejia.Wu 呉可嘉
        </a>
      </h2>
      <p class="lead"></p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/gallery/">Gallery</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="/resume">Resume</a>
      <a class="sidebar-nav-item" href="https://github.com/edward9145/edward9145.github.io">GitHub project</a>
      <span class="sidebar-nav-item">Currently vBeta-1.0</span>
    </nav>

    <p>&copy; 2015. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Develop App Dr.Seek - Server Side</h1>
  <span class="post-date">09 May 2015</span>
  <p>Dr.Seek(贴心医生) is an app for bringing smooth comunication between doctor and patient, make the efficient treatment possible.<br></p>

<p>As the server side engineer of this app, I am going to share my experience of the development.</p>

<h3 id="server-architecture">Server Architecture</h3>

<p><a href="/public/img/drseek-server-architect.jpg" data-lightbox="Server-Architecture" data-title="Application Server Architecture">
    <img src="/public/img/drseek-server-architect.jpg" alt="Server-Architecture"/>
</a></p>

<p>Nginx is used as a reverse proxy to redirect the HTTP request to Tomcat servers.</p>

<p>The Spring Web Project will always be packaged as WAR and depolyed on multi-Tomcat servers. 
To quick test the new features and fix bugs, the project is automatically packaged to WAR and deployed to the test server when SVN <code>hooks/post-commit</code>,
When everything seems OK, go on deploying to the real servers.</p>

<p>To increase the speed to access data, <code>mybatis-redis</code> is integrated to cache the database results.
MySQL Database are configurated as Master-slave Replication, because the read/write may always &gt; 1.
(Here we didn&#39;t use redis to share sticky session, although there is <code>Redis-Session-Manager</code> for Tomcat, for we have config <code>ip_hash</code> in Nginx) </p>

<p>Case History is one of important features in the app. Medical record and treatment report may not have the same format. 
Data Models should have flexible schema, so we choose MongoDB to save this kinds of documents.</p>

<p>Inspired by talking with an engineer of momo, we use <code>openfire</code> as RTC server for instant messaging.
It&#39;s open source and extensible, and we can customize suitable plugins for our purpose, such as sending voice, images, case history and other kinds of attachements in message.
(NG: When there are more than 2000 people in one&#39;s contact book, it may cause uncompletely transfer problem.) </p>

<p>Users can upload images and attachments to Web Server. 
Web server handles the upload files, copy them to File Server, and store URL mapping into DB. 
(To avoid uploading duplicated file, check existance on server by MD5 checksum for the file before upload)</p>

<h3 id="about-the-app">About the App</h3>

<p><img src="/public/img/drseek-icon.png" width="64px"/></p>

<p><a href="http://www.tiexinyisheng.com">Home Page <i class="fa fa-link"></i></a><br>
<a href="https://itunes.apple.com/us/app/tie-xin-yi-sheng/id934643717?mt=8">App Store <i class="fa fa-link"></i></a></p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2015/05/10/front-end-developer-interview/">
            Front-end Developer Interview Questions
            <small>10 May 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2015/05/10/dr-seek-admin-console/">
            Develop App Dr.Seek - Admin Console
            <small>10 May 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2015/05/08/todo/">
            TODO
            <small>08 May 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'kejiawu'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    </div>

  </body>
</html>
